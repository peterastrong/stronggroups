
<h1><%= @subgroup.name %></h1>
<p><strong>Class Description:  </strong><%= @subgroup.description %></p>


<!-- Member Subgroup Show Page -->
  <% if current_user.member?(@subgroup.group.id) %>
    <h3>Events/Assignments</h3>
      <% @subgroup.events.each do |event| %>
        <p><strong><%= event.name %>:</strong> <%= event.description %></p>
      <% end %>

     <h3>Members of this subgroup</h3>
      <% @subgroup.users.each do |user| %>
        <p><%= user.full_name %> - <%= user.role(user, @subgroup.group.id) %></p>
      <% end %>
  <% end %>

<!-- Admin Subgroup Show page -->
  <% if current_user.admin?(@subgroup.group.id) %>
    <h3>Events/Assignments</h3>
      <% @subgroup.events.each do |event| %>
        <p><strong><%= event.name %>:</strong> <%= event.description %></p>
      <% end %>

    <h3>Members of this subgroup</h3>
      <% @subgroup.users.each do |user| %>
        <p><%= user.full_name %> - <%= user.role(user, @subgroup.group.id) %></p>
      <% end %>

    <h3>Add an event for this subgroup.</h3>
      <%= form_tag "/events", method: :post do %>

        <div>Event Name: <input type="text" name="name"></div>
        <div>Description: <input type="text" name="description"></div>
        <div>Date: <input type="date" name="date"></div>
        <div>Registration Deadline: <input type="date" name="registration_deadline"></div>
        <div>Due Date: <input type="date" name="due_date"></div>
        <input type="hidden" name="subgroup_id" value="<%= @subgroup.id %>">
        <input type="submit" value="Add Event">
      <% end %>
<!-- should only be able to add this user to the subgroup if they are a member of the group, not sure if that is the case, must test, maybe a dropdown of all /names emails in the input box for email?  -->
    <h3>Add a user to this subgroup by their email address.  </h3>
      <%= form_tag "/user_subgroups", method: :post do %>
        <div>email: <input type="email" name="email"></div>
        <input type="hidden" name="subgroup_id" value="<%= @subgroup.id %>">
        <input type="submit" value="Add User">
      <% end %>

    <%= link_to "update", "/subgroups/#{@subgroup.id}/edit"  %>

  <% end %>
<div ng-app="app">
  <div id="messages-<%= @subgroup.id %>" ng-controller="messagesCtrl" ng-init="setup(<%= @subgroup.id %>)">
    
  </div>
</div>